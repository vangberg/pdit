---
import Layout from '../../layouts/Layout.astro';

const posts = await Astro.glob('./*.astro');
const postList = posts
  .filter(post => post.title) // exclude index
  .map(post => ({
    title: post.title,
    date: post.date,
    url: post.url
  }))
  .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
---
<Layout title="News - pdit" description="News, updates, and announcements">
  <main>
    <h1>News</h1>
    <ul>
      {postList.map(post => (
        <li>
          <span class="date">{post.date}</span>
          <a href={post.url}>{post.title}</a>
        </li>
      ))}
    </ul>
  </main>
</Layout>

<style>
  h1 {
    margin-bottom: 2rem;
  }
  ul {
    list-style: none;
  }
  li {
    display: flex;
    align-items: baseline;
    gap: 1rem;
    padding: 0.75rem 0;
    border-bottom: 1px solid #eee;
    margin-bottom: 0;
    padding-left: 0;
  }
  li::before {
    display: none;
  }
  li:first-child {
    border-top: 3px solid #1a1a1a;
  }
  .date {
    color: #888;
    font-size: 0.9rem;
    font-variant-numeric: tabular-nums;
    flex-shrink: 0;
    min-width: 5rem;
    font-weight: 600;
  }
  a {
    color: #1a1a1a;
    text-decoration: none;
  }
  a:hover {
    color: #E63946;
  }
</style>
