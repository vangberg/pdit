---
import Layout from '../layouts/Layout.astro';
---
<Layout title="Manual - pdit">
  <div class="layout">
    <aside>
      <div class="toc-header">On this page</div>
      <div class="toc-section">
        <div class="toc-section-title"><span class="num">1.</span> <a href="#getting-started">Getting Started</a></div>
        <div class="toc-items">
          <a href="#quick-start">Quick Start</a>
        </div>
      </div>

      <div class="toc-section">
        <div class="toc-section-title"><span class="num">2.</span> <a href="#output">Output</a></div>
        <div class="toc-items">
          <a href="#markdown">Markdown</a>
          <a href="#html">HTML</a>
          <a href="#ipython-display">IPython display</a>
          <a href="#dataframes">DataFrames</a>
          <a href="#plots">Plots</a>
        </div>
      </div>

      <div class="toc-section">
        <div class="toc-section-title"><span class="num">3.</span> <a href="#how-to">How-to</a></div>
        <div class="toc-items">
          <a href="#suppress-output">Suppress output</a>
        </div>
      </div>

    </aside>

    <main>
      <h1>Manual</h1>
      <p class="subtitle">Everything you need to know about pdit</p>

      <h2 id="getting-started">Getting Started</h2>
      <p>pdit is an interactive Python editor that displays execution results inline.</p>
      <ul>
        <li><strong>Like notebooks</strong>: Results appear inline with code</li>
        <li><strong>Like a REPL</strong>: Work with regular .py files</li>
        <li><strong>Unlike both</strong>: No cell management needed</li>
      </ul>
      <h3 id="quick-start">Quick Start</h3>
      <pre><code>pip install pdit
pdit example.py</code></pre>

      <h2 id="output">Output</h2>
      <h3 id="markdown">Markdown</h3>
      <p>Top-level string output renders as Markdown, so headings, lists, and emphasis display cleanly.</p>

      <h3 id="html">HTML</h3>
      <p>Rich HTML output is supported for objects that implement <code>_repr_html_()</code>; see note: <a href="https://ipython.readthedocs.io/en/latest/api/generated/IPython.display.html#IPython.display.display">IPython.display.display</a>.</p>

      <h3 id="ipython-display">IPython display</h3>
      <p>IPython display objects render inline; see <a href="https://ipython.readthedocs.io/en/latest/api/generated/IPython.display.html">IPython.display</a> for details.</p>

      <h3 id="dataframes">DataFrames</h3>
      <p>Pandas and Polars DataFrames render as interactive tables automatically.</p>

      <h3 id="plots">Plots</h3>
      <p>Matplotlib figures display inline. Call <code>plt.show()</code>. To avoid every <code>plt.*</code> call emitting a plot, wrap plot creation in <code>with plt.ioff():</code> and call <code>plt.show()</code> when you're ready.</p>
      <pre><code>import matplotlib.pyplot as plt

with plt.ioff():
    plt.figure()
    plt.plot(x, y)
    plt.show()</code></pre>

      <h2 id="how-to">How-to</h2>
      <h3 id="suppress-output">Suppress output with a trailing semicolon</h3>
      <p>Like IPython, pdit suppresses inline output if a statement ends with <code>;</code>.</p>
      <pre><code>import pandas as pd
df = pd.read_csv("data.csv");</code></pre>

    </main>
  </div>

  <script>
    const tocLinks = document.querySelectorAll('aside a[href^="#"]');
    const sections = document.querySelectorAll('h2[id]');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          tocLinks.forEach(link => link.classList.remove('active'));
          const activeLink = document.querySelector(`aside a[href="#${entry.target.id}"]`);
          if (activeLink) activeLink.classList.add('active');
        }
      });
    }, { rootMargin: '-20% 0px -60% 0px' });

    sections.forEach(section => observer.observe(section));
  </script>
</Layout>

<style>
  .layout {
    max-width: 800px;
    margin: 0 auto;
    padding: 3rem 2rem;
    display: flex;
    gap: 3rem;
  }
  aside {
    width: 200px;
    flex-shrink: 0;
    position: sticky;
    top: 2rem;
    align-self: flex-start;
    order: 1;
  }
  .toc-header {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #888;
    margin-bottom: 1rem;
    font-weight: 700;
  }
  .toc-section {
    margin-bottom: 1rem;
  }
  .toc-section-title {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
    margin-bottom: 0.25rem;
  }
  .toc-section-title .num {
    color: #E63946;
    font-size: 0.9rem;
    font-weight: 700;
  }
  .toc-section:nth-child(3) .num { color: #457B9D; }
  .toc-section:nth-child(4) .num { color: #2A9D8F; }
  .toc-section:nth-child(5) .num { color: #F4A261; }
  .toc-section-title a {
    color: #1a1a1a;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.95rem;
  }
  .toc-section-title a:hover { color: #E63946; }
  .toc-items {
    padding-left: 1.25rem;
  }
  .toc-items a {
    display: block;
    color: #666;
    text-decoration: none;
    font-size: 0.875rem;
    padding: 0.15rem 0;
  }
  .toc-items a:hover { color: #E63946; }
  aside a.active { color: #E63946 !important; }
  main {
    flex: 1;
    min-width: 0;
    max-width: none;
    margin: 0;
    padding: 0;
  }
  h1 {
    margin-bottom: 0.5rem;
  }
  .subtitle {
    color: #555;
    margin-bottom: 2rem;
    font-size: 1.1rem;
  }
  h2 {
    font-size: 2.1rem;
    font-weight: 800;
    letter-spacing: -0.01em;
    margin-top: 2.5rem;
    padding-top: 1.5rem;
    border-top: 3px solid #1a1a1a;
    text-transform: none;
  }
  h2:nth-of-type(2)::before { background: #FFD700; }
  h2:first-of-type {
    margin-top: 0;
    border-top: none;
    padding-top: 0;
  }
  h3 {
    font-size: 1.25rem;
    font-weight: 700;
    letter-spacing: -0.01em;
    color: #1a1a1a;
    margin-top: 1.75rem;
    margin-bottom: 0.5rem;
    padding-bottom: 0.2rem;
    border-bottom: 2px solid #FFD700;
    text-transform: none;
  }
  ul, ol {
    padding-left: 1.5rem;
  }
  li {
    margin-bottom: 0.5rem;
  }
</style>
